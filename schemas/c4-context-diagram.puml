@startuml C4_Context
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

LAYOUT_WITH_LEGEND()

title Диаграмма контекста системы "Расход Организации"

Person(admin_full, "Администратор (Роль-4)", "Полный доступ ко всем функциям системы")
Person(viewer_org, "Наблюдатель организации (Роль-1)", "Просмотр расхода всей организации")
Person(viewer_dept, "Наблюдатель департамента (Роль-2)", "Просмотр только своего департамента")
Person(manager_dept, "Начальник управления (Роль-3)", "Просмотр департамента + редактирование своего управления")
Person(hr_admin, "Кадровый администратор (Роль-5)", "Управление персоналом в своём подразделении")
Person(manager_div, "Начальник отдела (Роль-6)", "Просмотр департамента + редактирование своего отдела")

System(org_system, "Система 'Расход Организации'", "Управление расходом личного состава, статусами сотрудников, генерация отчетности и кадровыми процессами")

System_Ext(auth_system, "Внешняя система авторизации", "Предоставляет JWT-токены для аутентификации и авторизации пользователей")
System_Ext(email_system, "Email сервер", "Отправка email-уведомлений пользователям")

Rel(admin_full, org_system, "Управляет всеми функциями, назначает роли, настраивает систему", "HTTPS")
Rel(viewer_org, org_system, "Просматривает расход всей организации, экспортирует отчёты", "HTTPS")
Rel(viewer_dept, org_system, "Просматривает расход своего департамента", "HTTPS")
Rel(manager_dept, org_system, "Редактирует статусы сотрудников своего управления", "HTTPS")
Rel(hr_admin, org_system, "Управляет штатным расписанием, вакансиями, переводами в своём подразделении", "HTTPS")
Rel(manager_div, org_system, "Редактирует статусы сотрудников своего отдела", "HTTPS")

Rel(org_system, auth_system, "Валидирует JWT-токены, получает информацию о ролях", "HTTPS/JWT")
Rel(org_system, email_system, "Отправляет уведомления о изменениях статусов, прикомандировании, истечении отпусков", "SMTP")

SHOW_LEGEND()
@enduml