# Сценарии использования системы по ролям

## Роль-1: Наблюдатель организации (только просмотр всей организации)

**Профиль пользователя:**
- Обычно: руководители высшего звена, аналитики, представители вышестоящих органов
- Не привязан к конкретному подразделению
- Полный доступ на чтение, без права редактирования

**Основные сценарии использования:**

1. **Просмотр полной структуры организации**
   - Действие: Открыть раздел "Структура организации"
   - Результат: Видит все департаменты → управления → отделы в виде дерева
   - Возможности: Развернуть/свернуть ветви, просмотреть подробную информацию о каждом подразделении
   - Ограничения: Не может создавать, редактировать или удалять подразделения

2. **Просмотр всех сотрудников организации**
   - Действие: Открыть раздел "Сотрудники"
   - Результат: Видит список всех сотрудников со всех подразделений
   - Фильтрация: По департаменту, управлению, отделу, должности, статусу
   - Сортировка: По ФИО, должности, дате приема, подразделению
   - Возможности: Просмотр карточки сотрудника (ФИО, фото, должность, статус, история)
   - Ограничения: Не может редактировать данные сотрудников

3. **Просмотр текущих статусов сотрудников**
   - Действие: Открыть раздел "Расход личного состава"
   - Результат: Видит текущие статусы всех сотрудников организации
   - Группировка: По подразделениям, по статусам
   - Фильтры: По дате, по типу статуса, по подразделению
   - Возможности: Просмотр истории статусов любого сотрудника
   - Ограничения: Не может изменять статусы

4. **Генерация отчетов по всей организации**
   - Действие: Открыть раздел "Отчеты" → "Создать отчет"
   - Выбор: 
     * Тип отчета: расход по организации, расход по департаменту, сводный отчет
     * Период: произвольный период или на конкретную дату
     * Формат: .docx, .xlsx, .pdf
   - Результат: Система генерирует отчет (ожидание 20-25 секунд)
   - Возможности: Скачать отчет, просмотреть историю сгенерированных отчетов
   - Доступ: К отчетам по всем подразделениям без ограничений

5. **Просмотр журнала аудита**
   - Действие: Открыть раздел "Журнал изменений"
   - Результат: Видит все операции, выполненные в системе
   - Фильтры: По пользователю, действию, дате, подразделению
   - Возможности: Просмотр деталей каждой операции (кто, что, когда изменил)
   - Ограничения: Не может экспортировать логи или восстанавливать данные

**Типичный день Роли-1:**
- 09:00 - Открывает систему, просматривает общую статистику по организации
- 10:00 - Генерирует отчет "Расход личного состава на сегодня" для утреннего совещания
- 14:00 - Проверяет изменения статусов за день в журнале аудита
- 16:00 - Формирует сводный отчет по департаментам для руководства

---

## Роль-2: Наблюдатель департамента (только просмотр своего департамента)

**Профиль пользователя:**
- Обычно: заместители начальника департамента, аналитики департамента
- Привязан к конкретному департаменту
- Доступ только к своему департаменту (включая все управления и отделы)

**Основные сценарии использования:**

1. **Просмотр структуры своего департамента**
   - Действие: Открыть раздел "Структура организации"
   - Результат: Видит только свой департамент → его управления → отделы
   - Ограничения: Не видит другие департаменты организации
   - Возможности: Просмотр всех подчиненных подразделений департамента

2. **Просмотр сотрудников департамента**
   - Действие: Открыть раздел "Сотрудники"
   - Результат: Видит только сотрудников своего департамента
   - Фильтрация: По управлению, отделу, должности, статусу внутри департамента
   - Возможности: Просмотр карточек сотрудников, истории переводов внутри департамента
   - Ограничения: Не видит сотрудников других департаментов

3. **Мониторинг статусов в департаменте**
   - Действие: Открыть раздел "Расход личного состава"
   - Результат: Видит текущие статусы сотрудников своего департамента
   - Группировка: По управлениям, по отделам, по статусам
   - Аналитика: Сколько человек в строю, в отпусках, на больничных, в командировках
   - Ограничения: Не может изменять статусы, видит только свой департамент

4. **Генерация отчетов по департаменту**
   - Действие: Создать отчет по своему департаменту
   - Выбор: Период, формат, детализация (по управлениям или отделам)
   - Результат: Отчет только по своему департаменту
   - Ограничения: Не может генерировать отчеты по другим департаментам или всей организации

5. **Просмотр истории изменений в департаменте**
   - Действие: Открыть журнал аудита
   - Результат: Видит операции, касающиеся только своего департамента
   - Фильтры: По управлению, отделу, типу операции, дате
   - Ограничения: Не видит операции в других департаментах

**Типичный день Роли-2:**
- 09:00 - Проверяет расход личного состава департамента на текущий день
- 10:00 - Готовит еженедельный отчет для начальника департамента
- 12:00 - Анализирует статусы по управлениям (кто в отпуске, на больничном)
- 15:00 - Проверяет, есть ли изменения статусов в течение дня
- 17:00 - Формирует статистику по департаменту для ежемесячного отчета

---

## Роль-3: Начальник управления (просмотр департамента + редактирование своего управления)

**Профиль пользователя:**
- Должность: Начальник управления или его заместитель
- Привязан к конкретному управлению внутри департамента
- Может просматривать весь департамент, но редактировать только свое управление

**Основные сценарии использования:**

1. **Просмотр структуры департамента, редактирование управления**
   - Действие: Открыть раздел "Структура организации"
   - Просмотр: Видит весь свой департамент
   - Редактирование: Может изменять только структуру своего управления
   - Возможности:
     * Создать новый отдел в своем управлении
     * Переименовать отделы управления
     * Изменить иерархию отделов
   - Ограничения: Не может создавать/изменять другие управления департамента

2. **Изменение статусов сотрудников своего управления**
   - Действие: Открыть карточку сотрудника → "Изменить статус"
   - Проверка прав:
     * ✓ Сотрудник принадлежит к управлению пользователя?
     * ✓ Пользователь не откомандирован?
   - Возможности:
     * Установить новый статус (В командировке, В отпуске, На больничном и т.д.)
     * Указать период действия статуса
     * Добавить комментарий
     * Запланировать статус на будущее
   - Результат: Статус изменен, запись в аудите, уведомления отправлены
   - Ограничения: 
     * Не может изменять статусы сотрудников других управлений
     * Если откомандирован, теряет права редактирования

3. **Массовое изменение статусов**
   - Действие: Выбрать несколько сотрудников → "Массовое действие"
   - Сценарий: Отправить группу сотрудников на учебу/конференцию
   - Выбор: Статус "Учёба/соревнования/конференция", даты
   - Результат: Статусы изменены для всех выбранных сотрудников
   - Валидация: Все сотрудники из управления пользователя

4. **Планирование статусов**
   - Действие: Открыть раздел "Планирование"
   - Возможности:
     * Запланировать отпуска на месяц вперед
     * Запланировать командировки
     * Просмотреть календарь статусов управления
   - Валидация: Проверка пересечений, контроль количества одновременных отпусков
   - Ограничения: Только для сотрудников своего управления

5. **Откомандирование сотрудников**
   - Действие: Открыть карточку сотрудника → "Откомандировать"
   - Заполнение:
     * В какое подразделение (выбор из списка)
     * Период командирования
     * Причина
   - Результат: Создан запрос на прикомандирование со статусом "Ожидает одобрения"
   - Уведомление: Начальник принимающего подразделения получает уведомление
   - Ожидание: Запрос должен быть одобрен принимающей стороной

6. **Одобрение прикомандирования (принимающая сторона)**
   - Действие: Открыть раздел "Запросы на прикомандирование"
   - Просмотр: Список входящих запросов на прикомандирование
   - Возможности:
     * Просмотреть детали запроса (кто, откуда, на какой период)
     * Одобрить запрос
     * Отклонить с указанием причины
   - Результат (при одобрении):
     * Статус запроса → "Одобрен"
     * Сотрудник получает статус "Прикомандирован"
     * Сотрудник может получать дополнительные статусы в новом подразделении
     * Уведомления отправлены всем участникам

7. **Возврат откомандированного сотрудника**
   - Действие: Открыть список откомандированных → "Запросить возврат"
   - Процесс:
     * Создается запрос на возврат сотрудника
     * Начальник принимающего управления должен одобрить
   - Результат: Сотрудник возвращается в исходное управление

8. **Генерация отчетов**
   - Доступ: Отчеты по своему департаменту (просмотр) и управлению (детально)
   - Возможности: Расход управления с детализацией по отделам

**Важные ограничения для Роли-3:**

⚠️ **При откомандировании:**
- Пользователь с Ролью-3, который откомандирован в другое управление, **теряет права редактирования** в любых управлениях
- Может только просматривать департамент
- После возврата права восстанавливаются

**Типичный день Роли-3:**
- 08:30 - Проверяет расход личного состава управления
- 09:00 - Изменяет статусы: двух сотрудников отправляет в командировку
- 11:00 - Одобряет входящий запрос на прикомандирование сотрудника из другого управления
- 14:00 - Планирует отпуска сотрудников на следующий месяц
- 16:00 - Генерирует отчет по управлению для начальника департамента
- 17:30 - Проверяет журнал изменений, просматривает кто менял статусы

---

## Роль-4: Системный администратор (полный доступ ко всем функциям)

**Профиль пользователя:**
- Должность: Начальник кадровой службы, системный администратор
- Не привязан к подразделению
- Полный контроль над всей системой

**Основные сценарии использования:**

1. **Управление организационной структурой**
   - Создание нового департамента:
     * Название, номер, описание
     * Назначение начальника департамента
   - Создание управления:
     * В каком департаменте
     * Название, номер
     * Прямое подчинение организации или департаменту
   - Создание отдела:
     * В каком управлении
     * Название, номер
   - Изменение структуры:
     * Перенос подразделения в другое подразделение
     * Расформирование подразделения (с переводом сотрудников)

2. **Управление пользователями и ролями**
   - Создание пользователя:
     * Привязка к сотруднику
     * Логин, начальный пароль (или интеграция с внешней системой)
   - Назначение роли:
     * Выбор роли (1-6)
     * Для Роли-5: указание подразделения и уровня доступа
     * Для Роль-3, Роль-6: автоматическая привязка к подразделению сотрудника
   - Изменение роли:
     * Повышение/понижение в правах
     * Переназначение на другое подразделение (для Роли-5)
   - Блокировка пользователя:
     * При увольнении или нарушениях

3. **Прием сотрудников на работу**
   - Действие: "Добавить сотрудника"
   - Заполнение:
     * ФИО
     * Подразделение (департамент → управление → отдел)
     * Должность (из справочника)
     * Дата приема
     * Загрузка фото 3×4
   - Результат:
     * Сотрудник создан с статусом "В строю"
     * Запись в аудите
     * Уведомление кадровому администратору подразделения

4. **Перевод сотрудников**
   - Внутренний перевод:
     * Из одного отдела в другой внутри управления
     * Из управления в управление внутри департамента
     * Между департаментами
   - Изменение должности:
     * Повышение/понижение
     * Изменение категории
   - Результат:
     * История переводов сохраняется
     * Статус может измениться (если был прикомандирован)

5. **Увольнение сотрудников**
   - Действие: Открыть карточку → "Уволить"
   - Заполнение:
     * Дата увольнения
     * Причина (по собственному желанию, сокращение и т.д.)
   - Проверки:
     * Нет ли активных статусов (командировка, отпуск)
     * Нет ли незакрытых прикомандирований
   - Результат:
     * Сотрудник помечен как уволенный
     * Доступ пользователя (если был) блокируется
     * История сохраняется

6. **Управление всеми статусами**
   - Возможности:
     * Изменять статусы любых сотрудников
     * Массовые изменения по подразделениям
     * Корректировать ошибочные статусы
     * Удалять запланированные статусы
   - Без ограничений по подразделениям

7. **Управление штатным расписанием**
   - Просмотр штатного расписания:
     * По всей организации
     * По департаментам, управлениям, отделам
   - Создание вакансий:
     * В любом подразделении
     * Для любой должности
   - Закрытие вакансий:
     * Назначением сотрудника
     * Упразднением должности

8. **Работа с журналом аудита**
   - Полный доступ:
     * Просмотр всех операций
     * Фильтрация по любым критериям
     * Экспорт логов для анализа
   - Восстановление данных:
     * Откат изменений при ошибках
     * Восстановление удаленных данных

9. **Управление отчетами**
   - Создание шаблонов отчетов:
     * Дизайн документов .docx
     * Макеты таблиц .xlsx
     * Структура PDF
   - Генерация любых отчетов:
     * По всей организации
     * По любым подразделениям
     * За любые периоды
   - История отчетов:
     * Просмотр всех сгенерированных отчетов
     * Удаление устаревших отчетов

10. **Настройка системы**
    - Управление справочниками:
      * Справочник должностей (добавление, изменение уровней)
      * Справочник статусов (если нужны дополнительные)
    - Настройка уведомлений:
      * Шаблоны email
      * Получатели уведомлений
    - Параметры системы:
      * Настройки безопасности
      * Параметры генерации отчетов

**Типичный день Роли-4:**
- 09:00 - Принимает двух новых сотрудников, создает учетные записи
- 10:00 - Одобряет перевод сотрудника между департаментами
- 11:00 - Создает нового пользователя с Ролью-5 для нового кадровика
- 13:00 - Исправляет ошибочно установленный статус сотрудника
- 14:00 - Генерирует сводный отчет по всей организации для руководства
- 15:30 - Создает новое управление в департаменте
- 16:00 - Просматривает журнал аудита за неделю
- 17:00 - Обрабатывает увольнение сотрудника, закрывает его учетную запись

---

## Роль-5: Кадровый администратор подразделения

**Профиль пользователя:**
- Должность: HR-специалист, кадровик подразделения
- Привязан к конкретному подразделению (департамент/управление/отдел)
- Специализируется на кадровом администрировании в рамках своей зоны ответственности

**Важные особенности назначения:**

При назначении Роли-5 обязательно указывается:
1. **Тип подразделения:** департамент / управление / отдел
2. **ID подразделения:** конкретное подразделение
3. **Уровень доступа:**
   - Департамент → доступ ко всем управлениям и отделам департамента
   - Управление → доступ к управлению и всем его отделам
   - Отдел → доступ только к этому отделу

**Основные сценарии использования:**

1. **Управление штатным расписанием подразделения**
   - Действие: Открыть "Штатное расписание"
   - Просмотр:
     * Все должности в подразделении
     * Занятые должности (с привязкой к сотрудникам)
     * Вакантные должности
     * Статистика: утвержденная численность vs фактическая
   - Возможности:
     * Создать новую вакансию
     * Изменить квоту должностей
     * Закрыть вакансию

2. **Создание вакансий**
   - Действие: "Создать вакансию"
   - Заполнение:
     * Должность (из справочника)
     * В каком отделе (внутри зоны ответственности)
     * Требования к кандидату
     * Дата открытия вакансии
   - Валидация:
     * Должность соответствует структуре подразделения?
     * Не превышает ли вакансия уровень доступа пользователя?
   - Результат: Вакансия создана, видна в штатном расписании

3. **Прием сотрудников на вакантные должности**
   - Действие: Открыть вакансию → "Назначить сотрудника"
   - Вариант А - Новый сотрудник:
     * ФИО, фото, дата приема
     * Автоматическая привязка к подразделению вакансии
     * Статус "В строю"
   - Вариант Б - Существующий сотрудник:
     * Выбор из списка сотрудников подразделения
     * Перевод на новую должность
   - Результат:
     * Вакансия закрыта
     * Сотрудник назначен
     * Запись в аудите

4. **Перевод сотрудников внутри подразделения**
   - Действие: Открыть карточку сотрудника → "Перевести"
   - Возможности:
     * На другую должность в том же отделе
     * В другой отдел (если управление в зоне ответственности)
     * В другое управление (если департамент в зоне ответственности)
   - Ограничения:
     * Только внутри зоны ответственности
     * Не может переводить в другой департамент
   - Результат:
     * История переводов обновлена
     * Уведомления отправлены

5. **Назначение должностей "за счёт"**
   - Сценарий: Временное назначение на должность выше
   - Действие: "Назначить и.о. (исполняющий обязанности)"
   - Заполнение:
     * Сотрудник
     * На какую должность назначается
     * За счёт какой должности (указать вакантную или занятую)
     * Период исполнения обязанностей
   - Результат:
     * Сотрудник числится на двух должностях
     * В штатном расписании одна должность помечена как "за счёт"
     * После окончания периода - автоматический возврат

6. **Просмотр и редактирование данных сотрудников**
   - Доступ: Ко всем сотрудникам зоны ответственности
   - Возможности:
     * Изменить ФИО (при ошибках ввода или смене фамилии)
     * Обновить фото
     * Просмотреть историю переводов
     * Просмотреть историю статусов
   - Ограничения:
     * Не может менять статусы (это право Роль-3 или Роль-4)
     * Не может увольнять (это право Роль-4)

7. **Создание структурных единиц (ограниченно)**
   - Возможности:
     * Создать новый отдел в управлении (если управление в зоне ответственности)
     * Переименовать отдел
   - Ограничения:
     * Не может создавать управления или департаменты
     * Не может удалять подразделения с сотрудниками

8. **Работа с журналом аудита**
   - Доступ: Только к операциям в своей зоне ответственности
   - Просмотр: Кто и когда изменял данные сотрудников подразделения
   - Ограничения: Не видит операции в других подразделениях

9. **Генерация отчетов по подразделению**
   - Возможности:
     * Отчет по штатному расписанию подразделения
     * Список сотрудников с должностями
     * Отчет по вакансиям
   - Ограничения:
     * Не может генерировать расход личного состава (это право Роль-3)

**Пример назначения Роли-5:**

**Случай 1: Кадровик департамента**
```
Пользователь: Иванова А.А.
Роль: Роль-5
Подразделение: Департамент кадров
Уровень: Департамент + все дочерние
Зона ответственности:
  - Департамент кадров
  - Управление подбора персонала
    - Отдел рекрутинга
    - Отдел адаптации
  - Управление развития персонала
    - Отдел обучения
    - Отдел оценки
```

**Случай 2: Кадровик управления**
```
Пользователь: Петров Б.Б.
Роль: Роль-5
Подразделение: Управление безопасности
Уровень: Управление + его отделы
Зона ответственности:
  - Управление безопасности
    - Отдел физической безопасности
    - Отдел информационной безопасности
  - НЕ видит другие управления департамента
```

**Случай 3: Кадровик отдела**
```
Пользователь: Сидорова В.В.
Роль: Роль-5
Подразделение: Отдел рекрутинга
Уровень: Только этот отдел
Зона ответственности:
  - Только Отдел рекрутинга
  - НЕ видит другие отделы управления
```

**Типичный день Роли-5 (кадровик управления):**
- 09:00 - Просматривает штатное расписание управления
- 09:30 - Открывает вакансию на должность "Старший инспектор" в Отделе А
- 10:30 - Принимает нового сотрудника на вакантную должность
- 11:30 - Оформляет перевод сотрудника из Отдела Б в Отдел В управления
- 13:00 - Назначает сотрудника и.о. начальника отдела на время отпуска руководителя
- 14:30 - Обновляет фото сотрудника (поменял документы)
- 15:30 - Генерирует отчет по штатному расписанию управления
- 16:30 - Проверяет вакансии, которые давно не закрыты

---

## Роль-6: Начальник отдела (просмотр департамента + редактирование своего отдела)

**Профиль пользователя:**
- Должность: Начальник отдела или его заместитель
- Привязан к конкретному отделу
- Может просматривать весь департамент, но редактировать только свой отдел

**Основные сценарии использования:**

1. **Просмотр структуры департамента**
   - Действие: Открыть "Структура организации"
   - Просмотр: Видит весь департамент со всеми управлениями и отделами
   - Ограничения: Не может редактировать структуру

2. **Изменение статусов сотрудников своего отдела**
   - Действие: Открыть карточку сотрудника → "Изменить статус"
   - Проверка прав:
     * ✓ Сотрудник из отдела пользователя?
     * ✓ Пользователь не откомандирован?
   - Возможности:
     * Все типы статусов для своего отдела
     * Планирование статусов
     * Массовое изменение для сотрудников отдела
   - Ограничения:
     * Не может изменять статусы в других отделах управления
     * Если откомандирован, теряет права

3. **Планирование и контроль статусов отдела**
   - Действие: Открыть "Планирование" → выбрать свой отдел
   - Возможности:
     * График отпусков отдела
     * Планирование командировок
     * Контроль: не слишком много ли сотрудников одновременно в отпуске

4. **Просмотр статусов департамента**
   - Действие: "Расход личного состава"
   - Просмотр:
     * Видит текущие статусы всего департамента
     * Группировка по управлениям и отделам
   - Редактирование: Только для своего отдела
   - Ограничения: Не может менять статусы в других отделах

5. **Генерация отчетов**
   - Доступ:
     * Отчеты по всему департаменту (только просмотр)
     * Детальные отчеты по своему отделу
   - Ограничения: Не может генерировать отчеты по всей организации

6. **Просмотр журнала изменений**
   - Доступ: К операциям в департаменте
   - Фокус: Особое внимание к изменениям в своем отделе

**Отличия Роли-6 от Роли-3:**

| Параметр | Роль-3 (Начальник управления) | Роль-6 (Начальник отдела) |
|----------|-------------------------------|---------------------------|
| Область просмотра | Весь департамент | Весь департамент |
| Область редактирования | Всё управление (несколько отделов) | Только один отдел |
| Количество подчиненных | Обычно 20-100 человек | Обычно 5-20 человек |
| Откомандирование | Может откомандировать из управления | Не может откомандировать |
| Одобрение прикомандирования | Может одобрять в управление | Не может одобрять |

**Типичный день Роли-6:**
- 08:30 - Проверяет расход личного состава отдела
- 09:00 - Отправляет двух сотрудников в командировку (меняет статусы)
- 11:00 - Планирует отпуска на следующий месяц для отдела
- 14:00 - Просматривает статусы по всему департаменту (для информации)
- 16:00 - Генерирует отчет по отделу для начальника управления
- 17:00 - Изменяет статус сотрудника, вернувшегося из отпуска

---

## Сравнительная таблица возможностей ролей

| Функция | Роль-1 | Роль-2 | Роль-3 | Роль-4 | Роль-5 | Роль-6 |
|---------|--------|--------|--------|--------|--------|--------|
| **Просмотр структуры** | Вся организация | Свой департамент | Свой департамент | Вся организация | Свое подразделение | Свой департамент |
| **Редактирование структуры** | ✗ | ✗ | Свое управление | ✓ Всё | Свое подразделение (ограниченно) | ✗ |
| **Просмотр сотрудников** | Всех | Своего департамента | Своего департамента | Всех | Своего подразделения | Своего департамента |
| **Изменение данных сотрудников** | ✗ | ✗ | ✗ | ✓ | ✓ (в своем подразделении) | ✗ |
| **Изменение статусов** | ✗ | ✗ | ✓ (свое управление) | ✓ (всех) | ✗ | ✓ (свой отдел) |
| **Планирование статусов** | ✗ | ✗ | ✓ (свое управление) | ✓ (всех) | ✗ | ✓ (свой отдел) |
| **Откомандирование** | ✗ | ✗ | ✓ (из управления) | ✓ | ✗ | ✗ |
| **Одобрение прикомандирования** | ✗ | ✗ | ✓ (в управление) | ✓ | ✗ | ✗ |
| **Прием на работу** | ✗ | ✗ | ✗ | ✓ | ✓ (в свое подразделение) | ✗ |
| **Увольнение** | ✗ | ✗ | ✗ | ✓ | ✗ | ✗ |
| **Перевод сотрудников** | ✗ | ✗ | ✗ | ✓ | ✓ (внутри подразделения) | ✗ |
| **Управление вакансиями** | ✗ | ✗ | ✗ | ✓ | ✓ (в своем подразделении) | ✗ |
| **Штатное расписание** | Просмотр | Просмотр | Просмотр | Полное управление | Управление в подразделении | Просмотр |
| **Генерация отчетов** | ✓ (вся организация) | ✓ (свой департамент) | ✓ (свой департамент) | ✓ (всё) | ✓ (свое подразделение) | ✓ (свой департамент) |
| **Журнал аудита** | Просмотр всех | Просмотр департамента | Просмотр департамента | Полный доступ + экспорт | Просмотр подразделения | Просмотр департамента |
| **Управление пользователями** | ✗ | ✗ | ✗ | ✓ | ✗ | ✗ |
| **Настройка системы** | ✗ | ✗ | ✗ | ✓ | ✗ | ✗ |
